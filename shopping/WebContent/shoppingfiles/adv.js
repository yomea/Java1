(function(g,y,c){var f=0;var a="cma";var t=(function(){var e="dangdang";var d=window.location.href;if(d.indexOf(e)>-1){f=7000;a="cma_dangdang"}})();function j(d){return Object.prototype.toString.call(d)==="[object Array]"}var r=function(){var s=location.hostname;var p=/^\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}$/;var d=s.split(".");var q=d.length-2;if(p.test(s)||2===d.length){return s}for(;0<=q;--q){if("www"===d[q]){return d.slice(q+1).join(".")}if(-1===",com,net,org,gov,edu,info,name,int,mil,arpa,asia,biz,pro,coop,aero,museum,ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cf,cg,ch,ci,ck,cl,cm,cn,co,cq,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,es,et,ev,fi,fj,fk,fm,fo,fr,ga,gb,gd,ge,gf,gh,gi,gl,gm,gn,gp,gr,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,in,io,iq,ir,is,it,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,ml,mm,mn,mo,mp,mq,mr,ms,mt,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nt,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,pt,pw,py,qa,re,ro,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sy,sz,tc,td,tf,tg,th,tj,tk,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,va,vc,ve,vg,vn,vu,wf,ws,ye,yu,za,zm,zr,zw,".indexOf(","+d[q]+",")){return d.slice(q).join(".")}}return s};_py.getLast=function(p){for(var d=this.length-1;0<=d;d--){if(j(this[d])){if(this[d][0]==p){return this[d][1]}}}};_py.serialize=function(){function u(B,D){for(var C=0;C<B.length;C++){if(B[C]===D){return C}}return -1}for(var s=["domain","urlParam","pi","e","p","mapping"],d=[],q=[],A=[],p,e=0;e<this.length;e++){p=this[e][0],-1===u(s,p)&&(q[p]=q[p]||[],0<q[p].length?-1===u(q[p],this[e][1])&&q[p].push(this[e][1]):(q[p].push(this[e][1]),d.push([p,q[p]])))}for(e=0;e<d.length;e++){A.push(d[e][0]+"="+c(d[e][1].join(",")))}return A.join("&")};g.ipy={r:/(^|&)jump=(\d*)/i,cookie:{set:function(s,q,p,d,e){z=new Date();z.setTime(z.getTime()+(p||0));y.cookie=s+"="+c(q||"")+(p?"; expires="+z.toGMTString():"")+";path=/; domain="+(d||(location.hostname=="localhost"?"":location.hostname))+(e?"; secure":"")},get:function(d){return(d=y.cookie.match(RegExp("(^|;)\\s*"+d+"=([^;]*)","i")))?decodeURIComponent(d[2]):""}},setCookie:function(p,d){ipy.cookie.set(p,d,31536000000,r())},setSession:function(p,d){ipy.cookie.set(p,d,0,r())},getJump:function(){var d=ipy.cookie.get("ipysession");return d&&(d=d.match(ipy.r))?parseInt(d[2]):0},setJump:function(d){var p=ipy.cookie.get("ipysession");p?p.match(ipy.r)?ipy.setSession("ipysession",p.replace(/jump=(\d*)/,"jump="+d)):ipy.setSession("ipysession",p+"&jump="+d):ipy.setSession("ipysession","jump="+d)},getInfo:function(q){var d=ipy.cookie.get(q);if(d){return d}try{if(g.localStorage){if(localStorage.getItem(q)){return localStorage.getItem(q)}}}catch(p){}return""},setInfo:function(q,d){if(d==null||d==""){return}ipy.setCookie(q,d);try{if(g.localStorage){localStorage.setItem(q,d)}}catch(p){}},getQueryString:function(p){if(p==""||p==null){return}var u=g.location.href,d=u.split(p),e="";if(d.length>1){u=d[1];e=u.split("&")[0].replace("=","");return e}var q=new RegExp("(^|&)"+p+"=([^&]*)(&|$)"),s=g.location.search.substr(1).match(q);if(s!=null&&s){return s[2]}var A=g.location.hash.substr(1).match(q);if(A!=null&&A){return A[2]}return""},setExendParam:function(A,B,u){var q=A||"",d=B||"",s=u||"";ipy.getExtendParam(q,d,s)},getExtendParam:function(d,q,u){var s="",p="";if(d!=null&&d){s="p="+d}if(q!=null&&q){_py.push(["pv",q])}if(u!=null&&u){s+="&ext="+u}ipy.extendSend(s)},itemInfo:function(p){var d=[],u;switch(typeof p){case"string":u=p;break;case"object":var q=["id","name","origPrice","price","brand","imgUrl","productUrl","categoryId","category","promotion","discount","soldOut","domain"];for(var e=0;e<q.length;e++){var s=(p[q[e]]==undefined)?"":p[q[e]];s=s.toString();d.push(c(s))}ipy.id=p.id||"";u=d.join(",");break;default:return u=""}return u},extendSend:function(d){var p="";if(_py.getLast("e")){p="e="+_py.getLast("e")+"&"}p+=d,l=_py.getLast("domain"),n=("https:"==location.protocol?"https":"http")+"://"+l+"/adv?"+_py.serialize()+ipy.getSession()+"&e="+h(p)+"&rd="+new Date().getTime();(new Image()).src=n},getSession:function(){var e=_py.getLast("c");if(e&&e!=null){var d=ipy.getJump();if(!isNaN(d)&&d==0){ipy.setJump(d+1);return""}d++;ipy.setJump(d);return"&s="+d}return""},getP:function(){var d=_py.getLast("p");var e=ipy.id?ipy.id:"";d=d?d:e;return d},onDomReady:function(d){if(y.addEventListener){y.addEventListener("DOMContentLoaded",d,false)}else{if(y.body&&y.body.lastChild){d}else{return setTimeout(arguments.callee,0)}}},events:{add:function(p,e,q){if(p==undefined){return}var d=this;e=e.toLowerCase();if(p.addEventListener){p.addEventListener(e,q,false)}else{if(p.attachEvent){p.attachEvent("on"+e,q)}}},remove:function(e,d,p){d=d.toLowerCase();if(e.removeEventListener){e.removeEventListener(d,p,false)}else{if(e.detachEvent){e.detachEvent("on"+d,p)}}},standardize:function(d){var e=this.getMousePositionRelativeToDocument(d);var p=this.getMousePositionOffset(d);if(d.stopPropagation){d.stopPropagation()}else{d.cancelBubble=true}return{target:this.getTarget(d),relatedTarget:this.getRelatedTarget(d),key:this.getCharacterFromKey(d),pageX:e.x,pageY:e.y,offsetX:p.x,offsetY:p.y,preventDefault:function(){if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}}}},getTarget:function(d){var e=d.srcElement||d.target;if(e.nodeType==3){e=e.parentNode}return e},getCharacterFromKey:function(d){var e="";if(d.keyCode){e=String.fromCharCode(d.keyCode)}else{if(d.which){e=String.fromCharCode(d.which)}}return e},getMousePositionRelativeToDocument:function(e){var d=0,p=0;if(e.pageX){d=e.pageX;p=e.pageY}else{if(e.clientX){d=e.clientX+y.body.scrollLeft+y.documentElement.scrollLeft;p=e.clientY+y.body.scrollTop+y.documentElement.scrollTop}}return{x:d,y:p}},getMousePositionOffset:function(e){var d=0,p=0;if(e.layerX){d=e.layerX;p=e.layerY}else{if(e.offsetX){proprietary;d=e.offsetX;p=e.offsetY}}return{x:d,y:p}},getRelatedTarget:function(e){var d=e.relatedTarget;if(e.type=="mouseover"){d=e.fromElement}else{if(e.type=="mouseout"){d=e.toElement}}return d}},css:{getAppliedStyle:function(e,d){var p="";if(g.getComputedStyle){p=e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue($.Utils.toHyphens(d))}else{if(e.currentStyle){p=e.currentStyle[$.Utils.toCamelCase(d)]}}return p},getArrayOfClassNames:function(d){var e=[];if(d.className){e=d.className.split(" ")}return e},addClass:function(d,e){var p=this.getArrayOfClassNames(d);p.push(e);d.className=p.join(" ")},removeClass:function(p,q){var s=this.getArrayOfClassNames(p);var d=[];for(var e=0;e<s.length;e++){if(q!=s[e]){d.push(s[e])}}p.className=d.join(" ")},hasClass:function(p,q){var e=false;var s=this.getArrayOfClassNames(p);for(var d=0;d<s.length;d++){if(q==s[d]){e=true}}return e},getPosition:function(e){var d=0,q=0;var p=e;if(e.offsetParent){do{d+=e.offsetLeft;q+=e.offsetTop}while(e=e.offsetParent)}return{x:d,y:q,height:p.offsetHeight,width:p.offsetWidth}}},elements:{getElementsByClassName:function(s,d){if(y.getElementsByClassName){return y.getElementsByClassName(s)}var u=null;if(d){u=d.getElementsByTagName("*")}else{u=y.getElementsByTagName("*")}var p=[];for(var q=0;q<u.length;q++){var e=u[q];if(ipy.css.hasClass(e,s)){p.push(e)}}return p}}};var n=location.href,m=y.referrer,v,x,o;g.parent!=g&&(n=m,m="");n&&_py.push(["u",n]);m&&_py.push(["r",m]);var k=_py.getLast("urlParam")||"pyck",w=ipy.getQueryString(k);w=w?w:ipy.getInfo("ipycookie");ipy.setInfo("ipycookie",w);w&&_py.push(["c",w]);var l=_py.getLast("domain");_py.getExtend=function(){var q=_py.getLast("e");if(q!=""&&q){return"e="+_py.getLast("e")}else{var d=ipy.cookie.get("_UID");if(d!=""){var p=d.split("::");return'{"uid":"'+p[1]+'","l":"'+p[2]+'"}'}return""}};var v=_py.getExtend();x=ipy.itemInfo(_py.getLast("pi"));n=("https:"==location.protocol?"https":"http")+"://"+l+"/adv?"+_py.serialize()+ipy.getSession()+"&pi="+c(x)+"&p="+c(ipy.getP())+"&e="+c(v)+"&rd="+new Date().getTime();function i(e){_py.cmf.d=e;var p=y.createElement("iframe");p.style.display="none";p.id="_pycmifr";y.body.appendChild(p);p.src="javascript:'<script>-function(cm){function img(){var img =new Image();return img;};cm.cmFun(img);}(window.parent._py.cmf)<\/script>'"}_py.cmf={d:null,timer:null,allMaps:[],image:null,_maps:[],trackUrl:"http://stats.ipinyou.com/stats/t.gif?p=QWfsh_CLIin5.W.W.uj.G2z.ipp.2ev.pkVO.SNvh.W.p&s=tTy-dRI_L_A3ykFqGJ5SSP&w=CKFlJmKiInTapBlBUKAbycrEp0ujz1PvBraXw_",isTrack:false,loadCount:0,syncNum:100,cmFun:function(e){var q=this.d;if(!q){return}var p=q.t;this.image=e;this.syncNum=q.p;this.allMaps=this._maps=q.us;if(p==1){this.cookieMapping()}else{if(p==2){this.syncNum=this.d.p=1;this.cookieMapping()}else{}}},trackFun:function(){if(location.hostname.indexOf("yohobuy.com")>-1){var d=new Image();d.src=_py.cmf.trackUrl;d.style.display="none"}},cookieMapping:function(){try{this._maps=this.allMaps.splice(0,this.syncNum);if(this._maps.length<=0){var s=y.getElementById("_pycmifr");if(s){s.parentNode.removeChild(s)}return}for(var p=0;p<this._maps.length;p++){var d=this.image();d.onload=d.onerror=function(){this.onload=null;_py.cmf.loadCount++;if(_py.cmf.loadCount>=_py.cmf.syncNum||_py.cmf.loadCount>=_py.cmf._maps.length){_py.cmf.loadCount=0;clearTimeout(_py.cmf.timer);_py.cmf.cookieMapping()}};d.src=this._maps[p];d.style.display="none"}this.timer=setTimeout(_py.cmf.timeOutCookieMapping,3000)}catch(q){}},timeOutCookieMapping:function(){try{if(_py.cmf._maps.length>0){_py.cmf.cookieMapping()}else{var p=y.getElementById("_pycmifr");if(p){p.parentNode.removeChild(p)}}}catch(d){}}};_py.initScript={addGood:function(){try{_py.initScript.addSize();_py.initScript.addColor();setTimeout(_py.initScript.addCar,0);_py.initScript.collect()}catch(d){}},addSize:function(){try{var q=y.getElementById("sizes");var d=q.getElementsByTagName("li");for(var p=0;p<d.length;p++){ipy.events.remove(d[p],"click",_py.initScript.addGood);ipy.events.add(d[p],"click",_py.initScript.addGood)}}catch(s){}},addColor:function(){try{var s=y.getElementsByClassName("colors")[0];var d=s.getElementsByTagName("li");for(var p=0;p<d.length;p++){ipy.events.remove(d[p],"click",_py.initScript.addGood);ipy.events.add(d[p],"click",_py.initScript.addGood)}}catch(q){}},getMoney:function(){var d="";try{d=window._py.getLast("pi").price}catch(p){}return d},getProductList:function(){var u="";try{var p=g,B=y,A=c;var q=B.getElementsByClassName("main")[0];var u="";var s=B.getElementById("num");var C=(s==null)?1:s.textContent;u=q.getAttribute("data-id")+","+C+";"}catch(A){}return u},addCar:function(){try{var d=y.getElementById("add-to-cart");ipy.events.remove(d,"click",_py.initScript.script1);ipy.events.add(d,"click",_py.initScript.script1)}catch(p){}},script1:function(){try{var H=g,E=y,D=c;var p=_py.initScript.getMoney();var B=_py.initScript.getProductList();var G=location.href,F=E.referrer,C,I,A=E.cookie,u=A.match(/(^|;)\s*ipycookie=([^;]*)/),q=A.match(/(^|;)\s*ipysession=([^;]*)/);if(H.parent!=H){C=G;G=F;F=C}k="//stats.ipinyou.com/cvt?a="+D("MC.61s.SxgqrucEQjMNbrSWLUAKkX")+"&c="+D(u?u[2]:"")+"&s="+D(q?q[2].match(/jump\%3D(\d+)/)[1]:"")+"&u="+D(G)+"&r="+D(F)+"&rd="+(new Date()).getTime()+"&Money="+D(p)+"&ProductList="+D(B)+"&e="+D(_py.getExtend());I=E.createElement("script");I.src=k;E.body.insertBefore(I,E.body.firstChild)}catch(D){}},script2:function(){try{var H=g,E=y,D=c;var p=_py.initScript.getMoney();var B=_py.initScript.getProductList();var G=location.href,F=E.referrer,C,I,A=E.cookie,u=A.match(/(^|;)\s*ipycookie=([^;]*)/),q=A.match(/(^|;)\s*ipysession=([^;]*)/);if(H.parent!=H){C=G;G=F;F=C}k="//stats.ipinyou.com/cvt?a="+D("MC.H1s._x66JhGR2CPMII0lYpUXcP")+"&c="+D(u?u[2]:"")+"&s="+D(q?q[2].match(/jump\%3D(\d+)/)[1]:"")+"&u="+D(G)+"&r="+D(F)+"&rd="+(new Date()).getTime()+"&Money="+D(p)+"&ProductList="+D(B)+"&e="+D(_py.getExtend());I=E.createElement("script");I.src=k;E.body.insertBefore(I,E.body.firstChild)}catch(D){}},collect:function(){try{var d=y.getElementById("collect-product");ipy.events.remove(d,"click",_py.initScript.script2);ipy.events.add(d,"click",_py.initScript.script2)}catch(p){}}};g.cm=i;function b(){if(y.body){var e=y.createElement("script");e.type="text/javascript";e.async=!0;e.src=n;e.onload=e.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){e.parentNode.removeChild(e);if(location.hostname.indexOf("yohobuy.com")>-1){ipy.onDomReady(_py.initScript.addGood())}var p=y.createElement("script");p.type="text/javascript";p.async=!0;p.onload=p.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){p.parentNode.removeChild(p)}};p.src=("https:"==location.protocol?"https":"http")+"://cm.ipinyou.com/idmr/advcm?a="+_py.getLast("a")+"&rd="+new Date().getTime();var q=y.getElementsByTagName("script")[0];q.parentNode.insertBefore(p,q)}};y.body.insertBefore(e,y.body.firstChild);var d=new Image();d.src=("https:"==location.protocol?"https":"http")+"://cms.tanx.com/t.gif?tanx_nid=29600513&tanx_cm"}else{setTimeout(b,50)}}setTimeout(b,10)})(window,document,encodeURIComponent);